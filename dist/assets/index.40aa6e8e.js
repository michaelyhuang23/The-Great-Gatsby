import{S as e,P as t,W as n,A as a,F as o,a as i,b as s,T as r,R as d,V as l,G as c,c as m,M as w,d as p,e as h,f as u,g as f,h as M,i as g,j as y,E as v,k as P,C as S,l as I,m as z}from"./vendor.c39ff00a.js";const b=new e,x=new t(75,window.innerWidth/window.innerHeight,1,2e3);let C=0;let F=.9;const R=new n({canvas:document.querySelector("#bg"),powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1});R.setPixelRatio(window.devicePixelRatio),R.setSize(window.innerWidth,window.innerHeight),R.toneMapping=a;let j=new o(7695,1,1500);b.fog=j,R.render(b,x);let A=new l;const W=new s(new i(1e4,1e4),{textureWidth:512,textureHeight:512,waterNormals:(new r).load("images/waternormals.jpg",(function(e){e.wrapS=e.wrapT=d})),sunDirection:new l,sunColor:15658734,waterColor:7695,distortionScale:3.7,fog:void 0!==b.fog});W.rotation.x=-Math.PI/2,b.add(W);let D=(new r).load("images/tower.mtl");let E;(new c).load("images/tower.glb",(function(e){e.scene.traverse((function(e){e.isMesh&&(e.material.map=D)})),e.scene.position.set(0,-2,500),E=e.scene,b.add(E)}));const H=new m(2,24,24),T=new w({color:89624,emissive:89624,emissiveIntensity:3}),k=new p(H,T);k.position.set(0,30,500);const q=new h(89624);q.position.set(0,30,490),b.add(q);const G=new u;G.scale.setScalar(1e4),b.add(G);const B=G.material.uniforms;B.turbidity.value=.1,B.rayleigh.value=.005,B.mieCoefficient.value=5e-7,B.mieDirectionalG.value=.008;const N=new f(R);A.setFromSphericalCoords(1,1,190),G.material.uniforms.sunPosition.value.copy(A),W.material.uniforms.sunDirection.value.copy(A).normalize(),b.environment=N.fromScene(G).texture;const V=new M(16777215);V.intensity=1,b.add(V);let J=new g(x,k,{resolutionScale:1,density:.8,decay:.98,weight:.9,samples:100}),K=new y(b,x),L=new v(x,J);L.renderToScreen=!0;let O=new P(R);O.addPass(K),O.addPass(L);let Q=[];function U(e,t,n){const a=(new r).load("images/"+e),o=new i(50,50),s=new p(o,new I({map:a}));let d=30;return n&&(d*=-1),s.position.set(d,22,t),s.rotation.set(0,Math.PI,0),s.material.transparent=!0,b.add(s),s}(new r).load("images/snow.png",(function(e){let t=new S(4,4),n=new I({map:e,transparent:!0,opacity:.8,color:16777215});for(let a=0;a<100;a++){let e=new p(t,n);e.position.set(200*Math.random()-100,200*Math.random()+100,500*Math.random()),e.rotation.x=Math.PI+Math.random()*Math.PI/3,e.rotation.y=Math.random()*Math.PI/3,e.rotation.z=Math.random()*Math.PI*2,Q.push(e),b.add(e)}})),b.add(k),Array(2e3).fill().forEach((function(){const e=new m(2,24,24),t=new w({color:16777215}),n=new p(e,t);let a=z.randFloatSpread(Math.PI),o=z.randFloatSpread(2*Math.PI),i=z.randFloatSpread(1e3)+1500,s=i*Math.cos(a),r=i*Math.sin(a),d=r*Math.sin(o),l=r*Math.cos(o);n.position.set(d,s,l),b.add(n)}));let X=U("dump-ground.png",130,!0),Y=U("myrtle.png",330,!1),Z=U("death-car.jpg",530,!0);function $(e){let t=Math.abs(e.position.z-x.position.z);e.material.opacity=t>100?0:t<50?1:1-(t-50)/50}x.position.set(0,20,0),x.lookAt(new l(0,30,200)),document.body.onscroll=function(){const e=document.body.getBoundingClientRect().top;x.position.z=.1*-e,C=.1*-e,k.position.z=C+500,q.position.z=C+500-10,E.position.z=C+500};let _=0;!function e(){requestAnimationFrame(e),$(X),$(Y),$(Z),_+=1/60*F,J.godRaysMaterial.uniforms.decay.value=Math.abs(Math.sin(_))/2+.48,_>=2*Math.PI&&(_=0,F=.5*Math.random()+.9),W.material.uniforms.time.value+=2/60,Q.forEach((e=>{e.position.y-=1,e.position.y<=0&&e.position.set(200*Math.random()-100,200*Math.random()+100,C+500*Math.random())})),O.render(.1)}();
